<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-UK" xml:lang="en-UK" >

<head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />     <meta name="author" content="Fidel Oltra, Ricardo Sánchez" />        <title>Unit 11. Controllers, routes, views. Guided example.</title>
    <style>
        code{white-space: pre-wrap;}
        span.smallcaps{font-variant: small-caps;}
        div.columns{display: flex; gap: min(4vw, 1.5em);}
        div.column{flex: auto; overflow-x: auto;}
        div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
        /* The extra [class] is a hack that increases specificity enough to
           override a similar rule in reveal.js */
        ul.task-list[class]{list-style: none;}
        ul.task-list li input[type="checkbox"] {
          font-size: inherit;
          width: 0.8em;
          margin: 0 0.8em 0.2em -1.6em;
          vertical-align: middle;
        }
        .display.math{display: block; text-align: center; margin: 0.5rem auto;}
        /* CSS for syntax highlighting */
        pre > code.sourceCode { white-space: pre; position: relative; }
        pre > code.sourceCode > span { line-height: 1.25; }
        pre > code.sourceCode > span:empty { height: 1.2em; }
        .sourceCode { overflow: visible; }
        code.sourceCode > span { color: inherit; text-decoration: inherit; }
        div.sourceCode { margin: 1em 0; }
        pre.sourceCode { margin: 0; }
        @media screen {
        div.sourceCode { overflow: auto; }
        }
        @media print {
        pre > code.sourceCode { white-space: pre-wrap; }
        pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
        }
        pre.numberSource code
          { counter-reset: source-line 0; }
        pre.numberSource code > span
          { position: relative; left: -4em; counter-increment: source-line; }
        pre.numberSource code > span > a:first-child::before
          { content: counter(source-line);
            position: relative; left: -1em; text-align: right; vertical-align: baseline;
            border: none; display: inline-block;
            -webkit-touch-callout: none; -webkit-user-select: none;
            -khtml-user-select: none; -moz-user-select: none;
            -ms-user-select: none; user-select: none;
            padding: 0 4px; width: 4em;
            color: #aaaaaa;
          }
        pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
        div.sourceCode
          {  background-color: #f8f8f8; }
        @media screen {
        pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
        }
        code span.al { color: #ef2929; } /* Alert */
        code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
        code span.at { color: #204a87; } /* Attribute */
        code span.bn { color: #0000cf; } /* BaseN */
        code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
        code span.ch { color: #4e9a06; } /* Char */
        code span.cn { color: #8f5902; } /* Constant */
        code span.co { color: #8f5902; font-style: italic; } /* Comment */
        code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
        code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
        code span.dt { color: #204a87; } /* DataType */
        code span.dv { color: #0000cf; } /* DecVal */
        code span.er { color: #a40000; font-weight: bold; } /* Error */
        code span.ex { } /* Extension */
        code span.fl { color: #0000cf; } /* Float */
        code span.fu { color: #204a87; font-weight: bold; } /* Function */
        code span.im { } /* Import */
        code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
        code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
        code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
        code span.ot { color: #8f5902; } /* Other */
        code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
        code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
        code span.ss { color: #4e9a06; } /* SpecialString */
        code span.st { color: #4e9a06; } /* String */
        code span.va { color: #000000; } /* Variable */
        code span.vs { color: #4e9a06; } /* VerbatimString */
        code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>
        <link rel="stylesheet" href="../web_template/aqua.css" />  
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
    <![endif]-->
      
</head>

<body>
    <div id="content">
                 <header id="title-block-header">
            <h1 class="title">Unit 11. Controllers, routes, views.
Guided example.</h1>
            <!---->
            <!--         <p class="author">Fidel Oltra, Ricardo
Sánchez</p>
         -->
                    </header>
                 <nav id="TOC" role="doc-toc">
            <div class="navContainer">
                                <h2 id="toc-title">Index</h2>
                 <ul>
<li><a href="#data-model" id="toc-data-model"><span
class="toc-section-number">1</span> Data model</a></li>
<li><a href="#application-creation" id="toc-application-creation"><span
class="toc-section-number">2</span> Application creation</a></li>
<li><a href="#controllers-and-routes"
id="toc-controllers-and-routes"><span
class="toc-section-number">3</span> Controllers and routes</a></li>
<li><a href="#services" id="toc-services"><span
class="toc-section-number">4</span> Services</a></li>
<li><a href="#views" id="toc-views"><span
class="toc-section-number">5</span> Views</a>
<ul>
<li><a href="#main-page-template-and-controller"
id="toc-main-page-template-and-controller"><span
class="toc-section-number">5.1</span> Main page template and
controller</a></li>
<li><a href="#single-contact-template-and-controller"
id="toc-single-contact-template-and-controller"><span
class="toc-section-number">5.2</span> Single contact template and
controller</a></li>
<li><a href="#contact-list-template-and-controller"
id="toc-contact-list-template-and-controller"><span
class="toc-section-number">5.3</span> Contact list template and
controller</a></li>
</ul></li>
</ul>
            </div>
        </nav>
                <main>
            <p>In this example we’re going to do a Contacts application.
            It’s the first of a series of guided examples.</p>
            <h1 data-number="1" id="data-model"><span
            class="header-section-number">1</span> Data model</h1>
            <p>Our data model is a contact entity which can have none or
            various phones:</p>
            <ul>
            <li>Contact:
            <ul>
            <li>id: an integer that identifies the contact</li>
            <li>title: string; can be “Mr.”, “Mrs.” or “Miss”</li>
            <li>name: string</li>
            <li>surname: string</li>
            <li>birthdate: string containing a date in “yyyy-mm-dd”
            format.</li>
            <li>email: string</li>
            </ul></li>
            <li>Phone:
            <ul>
            <li>idContact: integer, the id of the contact which belongs
            the phone number</li>
            <li>number: string, the phone number.</li>
            <li>type: string, can be “Mobile”, “Landline” or
            “Work”.</li>
            </ul></li>
            </ul>
            <p>To simulate the storing of the sample data we will use 2
            arrays:</p>
            <div class="sourceCode" id="cb1"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span> <span class="va">$contacts</span> <span class="op">=</span> <span class="dt">array</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(<span class="st">&quot;id&quot;</span>=&gt; <span class="dv">11</span><span class="ot">,</span> <span class="st">&quot;title&quot;</span>=&gt; <span class="st">&quot;Mr.&quot;</span><span class="ot">,</span> <span class="st">&quot;name&quot;</span>=&gt; <span class="st">&quot;Mike&quot;</span><span class="ot">,</span> <span class="st">&quot;surname&quot;</span>=&gt; <span class="st">&quot;Molina&quot;</span><span class="ot">,</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;birthdate&quot;</span>=&gt;<span class="st">&quot;1975-10-21&quot;</span><span class="ot">,</span> <span class="st">&quot;email&quot;</span>=&gt;<span class="st">&quot;molina@mail.com&quot;</span>)<span class="ot">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(<span class="st">&quot;id&quot;</span>=&gt; <span class="dv">12</span><span class="ot">,</span> <span class="st">&quot;title&quot;</span>=&gt; <span class="st">&quot;Mrs.&quot;</span><span class="ot">,</span> <span class="st">&quot;name&quot;</span>=&gt; <span class="st">&quot;Mary Jane&quot;</span><span class="ot">,</span> <span class="st">&quot;surname&quot;</span>=&gt; <span class="st">&quot;Smith&quot;</span><span class="ot">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;birthdate&quot;</span>=&gt;<span class="st">&quot;1986-05-22&quot;</span><span class="ot">,</span> <span class="st">&quot;email&quot;</span>=&gt;<span class="st">&quot;mj@mail.com&quot;</span>)<span class="ot">,</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(<span class="st">&quot;id&quot;</span>=&gt; <span class="dv">13</span><span class="ot">,</span> <span class="st">&quot;title&quot;</span>=&gt; <span class="st">&quot;Mr.&quot;</span><span class="ot">,</span> <span class="st">&quot;name&quot;</span>=&gt; <span class="st">&quot;Arthur&quot;</span><span class="ot">,</span> <span class="st">&quot;surname&quot;</span>=&gt; <span class="st">&quot;McFly&quot;</span><span class="ot">,</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;birthdate&quot;</span>=&gt;<span class="st">&quot;1990-08-14&quot;</span><span class="ot">,</span> <span class="st">&quot;email&quot;</span>=&gt;<span class="st">&quot;mcfly@mail.com&quot;</span>)<span class="ot">,</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(<span class="st">&quot;id&quot;</span>=&gt; <span class="dv">9</span><span class="ot">,</span> <span class="st">&quot;title&quot;</span>=&gt; <span class="st">&quot;Miss&quot;</span><span class="ot">,</span> <span class="st">&quot;name&quot;</span>=&gt; <span class="st">&quot;Lory&quot;</span><span class="ot">,</span> <span class="st">&quot;surname&quot;</span>=&gt; <span class="st">&quot;Grimes&quot;</span><span class="ot">,</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;birthdate&quot;</span>=&gt;<span class="st">&quot;1967-02-08&quot;</span><span class="ot">,</span> <span class="st">&quot;email&quot;</span>=&gt;<span class="st">&quot;logrimes@mail.com&quot;</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>)<span class="ot">;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span> <span class="va">$phones</span> <span class="op">=</span> <span class="dt">array</span>(</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(<span class="st">&quot;idContact&quot;</span>=&gt;<span class="dv">11</span><span class="ot">,</span> <span class="st">&quot;number&quot;</span>=&gt;<span class="st">&quot;666557744&quot;</span><span class="ot">,</span> <span class="st">&quot;type&quot;</span>=&gt;<span class="st">&quot;Mobile&quot;</span>)<span class="ot">,</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(<span class="st">&quot;idContact&quot;</span>=&gt;<span class="dv">11</span><span class="ot">,</span> <span class="st">&quot;number&quot;</span>=&gt;<span class="st">&quot;295667788&quot;</span><span class="ot">,</span> <span class="st">&quot;type&quot;</span>=&gt;<span class="st">&quot;Landline&quot;</span>)<span class="ot">,</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(<span class="st">&quot;idContact&quot;</span>=&gt;<span class="dv">13</span><span class="ot">,</span> <span class="st">&quot;number&quot;</span>=&gt;<span class="st">&quot;667889900&quot;</span><span class="ot">,</span> <span class="st">&quot;type&quot;</span>=&gt;<span class="st">&quot;Work&quot;</span>)<span class="ot">,</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(<span class="st">&quot;idContact&quot;</span>=&gt;<span class="dv">9</span><span class="ot">,</span> <span class="st">&quot;number&quot;</span>=&gt;<span class="st">&quot;664444666&quot;</span><span class="ot">,</span> <span class="st">&quot;type&quot;</span>=&gt;<span class="st">&quot;Work&quot;</span>)<span class="ot">,</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(<span class="st">&quot;idContact&quot;</span>=&gt;<span class="dv">9</span><span class="ot">,</span> <span class="st">&quot;number&quot;</span>=&gt;<span class="st">&quot;667889888&quot;</span><span class="ot">,</span> <span class="st">&quot;type&quot;</span>=&gt;<span class="st">&quot;Mobile&quot;</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>)<span class="ot">;</span></span></code></pre></div>
            <h1 data-number="2" id="application-creation"><span
            class="header-section-number">2</span> Application
            creation</h1>
            <p>You can create your app using any way shown in the Unit
            10:</p>
            <div class="sourceCode" id="cb2"><pre
            class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">symfony</span> new contacts_symfony <span class="at">--version</span><span class="op">=</span><span class="st">&quot;7.1.*&quot;</span></span></code></pre></div>
            <p>or</p>
            <div class="sourceCode" id="cb3"><pre
            class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">composer</span> create-project symfony/skeleton:<span class="st">&quot;7.1.*&quot;</span> contacts_symfony</span></code></pre></div>
            <h1 data-number="3" id="controllers-and-routes"><span
            class="header-section-number">3</span> Controllers and
            routes</h1>
            <p>In this step we will create 2 controllers:</p>
            <ul>
            <li>MainPageController, for the main page</li>
            <li>ContactsController, for showing information about one
            contact identified by its id.</li>
            </ul>
            <p>Remember to install first the <strong>maker
            bundle</strong> and <strong>Twig</strong>:</p>
            <div class="sourceCode" id="cb4"><pre
            class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">composer</span> require <span class="at">--dev</span> symfony/maker-bundle</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="ex">symfony</span> composer require twig</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="ex">symfony</span> console make:controller MainPageController</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="ex">symfony</span> console make:controller ContactsController</span></code></pre></div>
            <p>You can check your routes starting the symfony server and
            going to the urls</p>
            <h1 data-number="4" id="services"><span
            class="header-section-number">4</span> Services</h1>
            <p>Before creating our first views, we need to retrieve the
            contact data, which we have stored in arrays.</p>
            <p>To do this we will use a service and create the two
            arrays as properties of the ContactsData class, using get
            methods to retrieve them:</p>
            <div class="sourceCode" id="cb5"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;?php</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">//src/Service/ContactData.php</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> App\Service<span class="ot">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> ContactData</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">static</span> <span class="dt">array</span> <span class="va">$contacts</span> <span class="op">=</span> <span class="dt">array</span>(</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">array</span>(<span class="st">&quot;id&quot;</span>=&gt; <span class="dv">11</span><span class="ot">,</span> <span class="st">&quot;title&quot;</span>=&gt; <span class="st">&quot;Mr.&quot;</span><span class="ot">,</span> <span class="st">&quot;name&quot;</span>=&gt; <span class="st">&quot;Mike&quot;</span><span class="ot">,</span> <span class="st">&quot;surname&quot;</span>=&gt; <span class="st">&quot;Molina&quot;</span><span class="ot">,</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;birthdate&quot;</span>=&gt;<span class="st">&quot;1975-10-21&quot;</span><span class="ot">,</span> <span class="st">&quot;email&quot;</span>=&gt;<span class="st">&quot;molina@mail.com&quot;</span>)<span class="ot">,</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">array</span>(<span class="st">&quot;id&quot;</span>=&gt; <span class="dv">12</span><span class="ot">,</span> <span class="st">&quot;title&quot;</span>=&gt; <span class="st">&quot;Mrs.&quot;</span><span class="ot">,</span> <span class="st">&quot;name&quot;</span>=&gt; <span class="st">&quot;Mary Jane&quot;</span><span class="ot">,</span> <span class="st">&quot;surname&quot;</span>=&gt; <span class="st">&quot;Smith&quot;</span><span class="ot">,</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;birthdate&quot;</span>=&gt;<span class="st">&quot;1986-05-22&quot;</span><span class="ot">,</span> <span class="st">&quot;email&quot;</span>=&gt;<span class="st">&quot;mj@mail.com&quot;</span>)<span class="ot">,</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">array</span>(<span class="st">&quot;id&quot;</span>=&gt; <span class="dv">13</span><span class="ot">,</span> <span class="st">&quot;title&quot;</span>=&gt; <span class="st">&quot;Mr.&quot;</span><span class="ot">,</span> <span class="st">&quot;name&quot;</span>=&gt; <span class="st">&quot;Arthur&quot;</span><span class="ot">,</span> <span class="st">&quot;surname&quot;</span>=&gt; <span class="st">&quot;McFly&quot;</span><span class="ot">,</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;birthdate&quot;</span>=&gt;<span class="st">&quot;1990-08-14&quot;</span><span class="ot">,</span> <span class="st">&quot;email&quot;</span>=&gt;<span class="st">&quot;mcfly@mail.com&quot;</span>)<span class="ot">,</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">array</span>(<span class="st">&quot;id&quot;</span>=&gt; <span class="dv">9</span><span class="ot">,</span> <span class="st">&quot;title&quot;</span>=&gt; <span class="st">&quot;Miss&quot;</span><span class="ot">,</span> <span class="st">&quot;name&quot;</span>=&gt; <span class="st">&quot;Lory&quot;</span><span class="ot">,</span> <span class="st">&quot;surname&quot;</span>=&gt; <span class="st">&quot;Grimes&quot;</span><span class="ot">,</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;birthdate&quot;</span>=&gt;<span class="st">&quot;1967-02-08&quot;</span><span class="ot">,</span> <span class="st">&quot;email&quot;</span>=&gt;<span class="st">&quot;logrimes@mail.com&quot;</span>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    )<span class="ot">;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">static</span> <span class="dt">array</span> <span class="va">$phones</span> <span class="op">=</span><span class="dt">array</span>(</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>        <span class="dt">array</span>(<span class="st">&quot;idContact&quot;</span>=&gt;<span class="dv">11</span><span class="ot">,</span> <span class="st">&quot;number&quot;</span>=&gt;<span class="st">&quot;666557744&quot;</span><span class="ot">,</span> <span class="st">&quot;type&quot;</span>=&gt;<span class="st">&quot;Mobile&quot;</span>)<span class="ot">,</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>        <span class="dt">array</span>(<span class="st">&quot;idContact&quot;</span>=&gt;<span class="dv">11</span><span class="ot">,</span> <span class="st">&quot;number&quot;</span>=&gt;<span class="st">&quot;295667788&quot;</span><span class="ot">,</span> <span class="st">&quot;type&quot;</span>=&gt;<span class="st">&quot;Land line&quot;</span>)<span class="ot">,</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">array</span>(<span class="st">&quot;idContact&quot;</span>=&gt;<span class="dv">13</span><span class="ot">,</span> <span class="st">&quot;number&quot;</span>=&gt;<span class="st">&quot;667889900&quot;</span><span class="ot">,</span> <span class="st">&quot;type&quot;</span>=&gt;<span class="st">&quot;Work&quot;</span>)<span class="ot">,</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">array</span>(<span class="st">&quot;idContact&quot;</span>=&gt;<span class="dv">9</span><span class="ot">,</span> <span class="st">&quot;number&quot;</span>=&gt;<span class="st">&quot;664444666&quot;</span><span class="ot">,</span> <span class="st">&quot;type&quot;</span>=&gt;<span class="st">&quot;Work&quot;</span>)<span class="ot">,</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>        <span class="dt">array</span>(<span class="st">&quot;idContact&quot;</span>=&gt;<span class="dv">9</span><span class="ot">,</span> <span class="st">&quot;number&quot;</span>=&gt;<span class="st">&quot;667889888&quot;</span><span class="ot">,</span> <span class="st">&quot;type&quot;</span>=&gt;<span class="st">&quot;Mobile&quot;</span>)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    )<span class="ot">;</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="kw">static</span> <span class="kw">function</span> getContacts()<span class="ot">:</span> <span class="dt">array</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">self</span>::<span class="va">$contacts</span><span class="ot">;</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="kw">static</span> <span class="kw">function</span> getPhones()<span class="ot">:</span> <span class="dt">array</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">self</span>::<span class="va">$phones</span><span class="ot">;</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
            <h1 data-number="5" id="views"><span
            class="header-section-number">5</span> Views</h1>
            <h2 data-number="5.1"
            id="main-page-template-and-controller"><span
            class="header-section-number">5.1</span> Main page template
            and controller</h2>
            <p>First of all, let’s change our
            <code>base.html.twig</code> file to link to our css style,
            that’s stored in <code>public/css/style.css</code>. We will
            use the <code>asset</code> function:</p>
            <div class="sourceCode" id="cb6"><pre
            class="sourceCode html"><code class="sourceCode html"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>{% block stylesheets %}</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">&quot;{{ asset(&#39;css/style.css&#39;) }}&quot;</span><span class="ot"> rel</span><span class="op">=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>{% endblock %}</span></code></pre></div>
            <blockquote>
            <p><strong>Note</strong>: Before using the
            <code>asset</code> function, you probably will need to
            install it. Run:</p>
            </blockquote>
            <div class="sourceCode" id="cb7"><pre
            class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">composer</span> require symfony/asset</span></code></pre></div>
            <p>Feel free to use the styles you prefer.</p>
            <p>We also want to change the page title for all our views.
            To do that, change the line 5 of the
            <code>base.html.twig</code> file to:</p>
            <div class="sourceCode" id="cb8"><pre
            class="sourceCode html"><code class="sourceCode html"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>{% block title %}{{ page_title }}{% endblock %}<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span></code></pre></div>
            <p>Remember to remove the title block from the child views
            so that they use the base title block.</p>
            <p>Now you can change or remove the icon and the script tag.
            The base file could be something like:</p>
            <div class="sourceCode" id="cb9"><pre
            class="sourceCode html"><code class="sourceCode html"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">&quot;UTF-8&quot;</span><span class="dt">&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>{% block title %}{{ page_title }}{% endblock %}<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>        {% block stylesheets %}</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">&quot;{{ asset(&#39;css/style.css&#39;) }}&quot;</span><span class="ot"> rel</span><span class="op">=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        {% endblock %}</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>        {% block javascripts %}</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>        {% endblock %}</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>        {% block body %}{% endblock %}</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div>
            <p>In the <code>MainPageController.php</code> controller we
            will create the page that the app will return when a user
            loads the page root (<code>/</code>).</p>
            <div class="sourceCode" id="cb10"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;?php</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> App\Controller<span class="ot">;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Symfony\Bundle\FrameworkBundle\Controller\AbstractController<span class="ot">;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Symfony\Component\HttpFoundation\Response<span class="ot">;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Symfony\Component\Routing\Annotation\Route<span class="ot">;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MainPageController <span class="kw">extends</span> AbstractController</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">#[</span>Route(<span class="st">&#39;/&#39;</span><span class="ot">,</span> name<span class="ot">:</span> <span class="st">&#39;app_main_page&#39;</span>)<span class="at">]</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="kw">function</span> index()<span class="ot">:</span> Response</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">$this</span>-&gt;render(<span class="st">&#39;main_page/index.html.twig&#39;</span><span class="ot">,</span> [</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;page_title&#39;</span> =&gt; <span class="st">&#39;My Contacts App - Main page&#39;</span><span class="ot">,</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>        ])<span class="ot">;</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
            <p>In this controller we are sending the
            <code>page_title</code> variable with the title to show in
            the browser bar.</p>
            <p>Then, in our <code>index.html.twig</code> file, we want
            to modify the view, in a similar way that in the previous
            practice, but using twig:</p>
            <div class="sourceCode" id="cb11"><pre
            class="sourceCode html"><code class="sourceCode html"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>{% extends &#39;base.html.twig&#39; %}</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>{% block body %}</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">main</span><span class="dt">&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>My Contacts App<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Welcome to my Contacts App<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>You can see the full  <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href </span><span class="op">=</span><span class="st">&quot;&quot;</span><span class="dt">&gt;</span>list of contacts<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>Or try to search a <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href </span><span class="op">=</span><span class="st">&quot;{{ path(&#39;app_contacts&#39;) }}&quot;</span><span class="dt">&gt;</span>contact<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> by its id<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">main</span><span class="dt">&gt;</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>{% endblock %}</span></code></pre></div>
            <p>You can observe how we are using the <code>path</code>
            function to link to the route name <code>app_contacts</code>
            that leads to the related route in the
            <code>ContactsController</code>.</p>
            <p>We’ll return later to change the link to the contacts
            list page.</p>
            <p>The result could be something like:</p>
            <figure>
            <img src="images/main_page.png" width="400"
            alt="Main page" />
            <figcaption aria-hidden="true">Main page</figcaption>
            </figure>
            <h2 data-number="5.2"
            id="single-contact-template-and-controller"><span
            class="header-section-number">5.2</span> Single contact
            template and controller</h2>
            <p>First of all we’re going to change the controller so that
            it sends to the view the necessary data needed to show a
            single contact information:</p>
            <ul>
            <li>An associative array with the contacts data</li>
            <li>An array with one associative array per phone number of
            the contact</li>
            <li>The page title</li>
            </ul>
            <p>In <code>ContactsController.php</code> change the names
            of the route and of the method, to add the contact id and to
            make them more meaningful:</p>
            <div class="sourceCode" id="cb12"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="at">#[</span>Route(<span class="st">&#39;/contact/{id&lt;\d+&gt;}&#39;</span><span class="ot">,</span> name<span class="ot">:</span> <span class="st">&#39;single_contact&#39;</span>)<span class="at">]</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">function</span> contact(<span class="va">$id</span><span class="op">=</span><span class="st">&#39;&#39;</span>)<span class="ot">:</span> Response</span></code></pre></div>
            <p>We need the data stored in the service ContactData, so we
            import it using its namespace:</p>
            <div class="sourceCode" id="cb13"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> App\Service\ContactData<span class="ot">;</span></span></code></pre></div>
            <p>Inside the <code>contact</code> method, the first thing
            is to search the contact in the array of contacts:</p>
            <div class="sourceCode" id="cb14"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">//Search the contact in the array</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="va">$contacts</span> <span class="op">=</span> ContactData::getContacts()<span class="ot">;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="va">$contact</span> <span class="op">=</span> <span class="dt">Array</span>()<span class="ot">;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="cf">foreach</span> (<span class="va">$contacts</span> <span class="kw">as</span> <span class="va">$c</span>){</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="va">$c</span>[<span class="st">&#39;id&#39;</span>] <span class="op">==</span> <span class="va">$id</span>) {</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>      <span class="va">$contact</span> <span class="op">=</span> <span class="va">$c</span><span class="ot">;</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span><span class="ot">;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
            <p>Then, we check if we have an <code>id</code> and if we
            have a valid <code>id</code>, get the contact data in the
            <code>$contact</code> array. We also get the phones for the
            selected contact into an array:</p>
            <p>We can construct the arrays like in the previous
            example:</p>
            <div class="sourceCode" id="cb15"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="va">$contact</span> <span class="op">=</span> <span class="dt">array</span>()<span class="ot">;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">//Search the contact in the array</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="va">$contacts</span> <span class="op">=</span> ContactData::getContacts()<span class="ot">;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="cf">foreach</span> (<span class="va">$contacts</span> <span class="kw">as</span> <span class="va">$c</span>){</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="va">$c</span>[<span class="st">&#39;id&#39;</span>] <span class="op">==</span> <span class="va">$id</span>) {</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">$contact</span> <span class="op">=</span> <span class="va">$c</span><span class="ot">;</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="ot">;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">//Check if we have an id and a contact</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="kw">empty</span>(<span class="va">$id</span>) ){</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="va">$contact</span> <span class="op">=</span> <span class="kw">null</span><span class="ot">;</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>} <span class="cf">elseif</span> (<span class="kw">empty</span>(<span class="va">$contact</span>)) {</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    <span class="va">$contact</span>[<span class="st">&#39;id&#39;</span>] <span class="op">=</span> <span class="va">$id</span><span class="ot">;</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    <span class="va">$contact</span>[<span class="st">&#39;name&#39;</span>] <span class="op">=</span> <span class="kw">null</span><span class="ot">;</span> <span class="co">//Set the contact&#39;s name to null to check if the contact exists</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="va">$contact</span>[<span class="st">&#39;phones&#39;</span>] <span class="op">=</span> <span class="dt">array</span>()<span class="ot">;</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    <span class="va">$phones</span> <span class="op">=</span> ContactData::getPhones()<span class="ot">;</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    <span class="va">$contactPhones</span> <span class="op">=</span> <span class="dt">array</span>()<span class="ot">;</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">//We need only the phone of a single contact</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">foreach</span> (<span class="va">$phones</span> <span class="kw">as</span> <span class="va">$phone</span>) {</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="va">$phone</span>[<span class="st">&#39;idContact&#39;</span>] <span class="op">==</span> <span class="va">$id</span>) {</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>            <span class="va">$contactPhones</span>[] <span class="op">=</span> <span class="va">$phone</span><span class="ot">;</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>    <span class="va">$contact</span>[<span class="st">&#39;phones&#39;</span>] <span class="op">=</span> <span class="va">$contactPhones</span><span class="ot">;</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
            <p>Finally, call the render function to pass the data to the
            template. Note that we have changed the template’s name to
            <code>contact.html.twig</code>:</p>
            <div class="sourceCode" id="cb16"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> <span class="va">$this</span>-&gt;render(<span class="st">&#39;contacts/contact.html.twig&#39;</span><span class="ot">,</span> [</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;contact&#39;</span> =&gt; <span class="va">$contact</span><span class="ot">,</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;page_title&#39;</span> =&gt; <span class="st">&#39;My Contacts App - Contact&#39;</span><span class="ot">,</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>])<span class="ot">;</span></span></code></pre></div>
            <p>Then, go to the template (remember to rename/refactor it
            to <code>contact.html.twig</code>) and modify it:</p>
            <div class="sourceCode" id="cb17"><pre
            class="sourceCode html"><code class="sourceCode html"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>{% extends &#39;base.html.twig&#39; %}</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>{% block body %}</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">h1</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;centered&quot;</span><span class="dt">&gt;</span>Contacts App<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    {%  if contact == null %}</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Please, enter a contact Id<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    {%  elseif contact.name == null %}</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>No contact found with id {{ contact.id }} <span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    {%  else %}</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">main</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;contact&quot;</span><span class="dt">&gt;</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Contact: {{ contact.title}} {{ contact.name }} {{ contact.surname}} <span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Birth date:<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span> {{ contact.birthdate }}<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Email:<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span> {{ contact.email }} <span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Phones:<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>                        {% for phone in contact.phones %}</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>                            <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span> {{ phone.type }}: {{ phone.number }} <span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>                        {% endfor %}</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&lt;/</span><span class="kw">main</span><span class="dt">&gt;</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>    {% endif %}</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>{% endblock %}</span></code></pre></div>
            <p>Note how we are using the <code>if</code> and
            <code>for</code> sentences to generate the view dynamically
            based on the data, checking if the ID is null or if the ID
            is not found (in this case we pass the invalid ID, but a
            null value for the name).</p>
            <p>The result view:</p>
            <figure>
            <img src="images/single_contact.png" width="400"
            alt="Single contact" />
            <figcaption aria-hidden="true">Single contact</figcaption>
            </figure>
            <p>We can also enter no id or invalid ids:</p>
            <figure>
            <img src="images/result2.png" alt="No id" />
            <figcaption aria-hidden="true">No id</figcaption>
            </figure>
            <figure>
            <img src="images/result3.png" alt="Invalid id" />
            <figcaption aria-hidden="true">Invalid id</figcaption>
            </figure>
            <h2 data-number="5.3"
            id="contact-list-template-and-controller"><span
            class="header-section-number">5.3</span> Contact list
            template and controller</h2>
            <p>To make the controller for the contact list page, we will
            use the same class for the previous one,
            <code>ContactsController</code>, but adding a new method to
            control the new route and to render a new template:</p>
            <div class="sourceCode" id="cb18"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="at">#[</span>Route(<span class="st">&#39;/contact_list&#39;</span><span class="ot">,</span> name<span class="ot">:</span> <span class="st">&#39;contact_list&#39;</span>)<span class="at">]</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">function</span> contactList()<span class="ot">:</span> Response</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">$this</span>-&gt;render(<span class="st">&#39;contacts/list.html.twig&#39;</span><span class="ot">,</span> [</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;contacts&#39;</span> =&gt; ContactData::getContacts()<span class="ot">,</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;page_title&#39;</span> =&gt; <span class="st">&#39;My Contacts App - Contact List&#39;</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    ])<span class="ot">;</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
            <p>This method is pretty simple: it simply passes the list
            of contacts and the page title to the render.</p>
            <p>We need a new template, placed in
            <code>templates/contacts</code>, named
            <code>list.html.twig</code>. In it we make a table using a
            <code>for</code> loop, creating a link in each row for
            opening the correspondent contact using the
            <code>path</code> function:</p>
            <div class="sourceCode" id="cb19"><pre
            class="sourceCode html"><code class="sourceCode html"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>{% extends &#39;base.html.twig&#39; %}</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>{% block body %}</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">h1</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;centered&quot;</span><span class="dt">&gt;</span>Contacts App<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    {%  if contacts == null %}</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>No contacts found<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    {%  else %}</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">main</span><span class="dt">&gt;</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">h2</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;centered&quot;</span><span class="dt">&gt;</span>Contacts<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">table</span><span class="dt">&gt;</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">&lt;</span><span class="kw">th</span><span class="dt">&gt;&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Title<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Name<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Surname<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Email<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>                {% for contact in contacts %}</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">&quot;{{ path(&#39;single_contact&#39;, { id: contact.id }) }}&quot;</span><span class="dt">&gt;</span>Open contact<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>{{ contact.title }}<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>{{ contact.name }}<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>{{ contact.surname }}<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>{{ contact.email }}<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>                {% endfor %}</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&lt;/</span><span class="kw">table</span><span class="dt">&gt;</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&lt;/</span><span class="kw">main</span><span class="dt">&gt;</span></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>    {% endif %}</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>{% endblock %}</span></code></pre></div>
            <figure>
            <img src="images/list.png" width="400" alt="Contact list" />
            <figcaption aria-hidden="true">Contact list</figcaption>
            </figure>
            <p>And, remember to change the link path in the
            <code>index.html.twig</code> to link to the list page:</p>
            <div class="sourceCode" id="cb20"><pre
            class="sourceCode html"><code class="sourceCode html"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>You can see the full  <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href </span><span class="op">=</span><span class="st">&quot;{{ path(&#39;contact_list&#39;)}}&quot;</span><span class="dt">&gt;</span>list of contacts<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div>
            <p>You can get all the code from the <a
            href="https://github.com/ricardoprofe/contacts_symfony-u11">GitHub
            repository</a>.</p>
        </main>
        

        <!--- Modal images -->

        <!-- The Modal -->
        <div id="myModal" class="modal">

            <!-- The Close Button -->
            <!--span class="close">&times;</span-->

            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="img01">

            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
        </div>

        <!-- End Modal Images -->

        <!-- Snackbar for copy code -->
        <div id="snackbar">Codi copiat!</div>
        <!-- End Snackbar -->

        <script>
            function ModalizeImages() {
                // Script basat en https://www.w3schools.com/howto/howto_css_modal_images.asp
                // PEr ampliar imatges en fer click

                // Get the modal
                var modal = document.getElementById("myModal");

                var modalImg = document.getElementById("img01");
                var captionText = document.getElementById("caption");

                // Get the image and insert it inside the modal - use its "alt" text as a caption
                //var img = document.getElementById("myImg");
                document.querySelectorAll("img").forEach((img => {
                        img.onclick = function() {
                            modal.style.display = "block";
                            modalImg.src = this.src;
                            captionText.innerHTML = this.alt;
                        }
                    }))
                    // Get the <span> element that closes the modal
                var span = document.getElementsByClassName("close")[0];

                // When the user clicks on <span> (x), close the modal
                //span.onclick = function() {
                myModal.onclick = function() {
                    modal.style.display = "none";
                }


            }


            function markItem(id) {
                // Restaurem format de tots
                document.querySelectorAll("#TOC a").forEach(function(item) {
                        //item.style.fontWeight = "300";
                        item.classList.remove("navItemSelected");
                    })
                    //item.style.color = "#ff0000";

                // Afegim format
                let items = document.querySelectorAll("#TOC a[href='#" + id + "']");
                items.forEach(function(item) {
                    //item.style.fontWeight = "bolder";
                    item.classList.add("navItemSelected");
                })

            }

            var observer = new IntersectionObserver(function(entries) {
                // isIntersecting is true when element and viewport are overlapping
                // isIntersecting is false when element and viewport don't overlap
                if (entries[0].isIntersecting === true) {
                    let id = entries[0].target.id;
                    markItem(id);
                }

            }, {
                threshold: [0]
            });

            window.addEventListener("load", function() {
                document.querySelectorAll("h1, h2, h3").forEach(function(item) {
                    observer.observe(item);
                });

                document.querySelectorAll("#TOC a").forEach(function(item) {
                    item.addEventListener("click", function(item) {
                        markItem(item.id);
                    })
                })

                // Fem modals totes les imatges
                ModalizeImages();
            })

            document.querySelector("#TOC").addEventListener("click", function(event) {
                let toc = event.target
                if (toc.offsetWidth > 10) {
                    toc.classList.add("minimizedToc");
                }
            })

            document.querySelector("#TOC").addEventListener("mouseover", function(event) {
                let toc = event.target
                if (toc.classList.contains("minimizedToc"))
                    toc.classList.remove("minimizedToc");
            })


                        
            /* PER COPIAR CODI */


            // Busca tots els elements amb la classe "sourceCode"
            var sourceCodeElements = document.querySelectorAll('div.sourceCode');

            /*Afegim el botó a tots els divs */
            // Afegir un botó per a cada element "sourceCode"
            sourceCodeElements.forEach(function(element) {
                console.log(element.id);
                var button = document.createElement('div');
                button.className = 'button-copy';

                // Afegir una icona al botó (fa servir FontAwesome com a exemple)
                //var icon = document.createElement('i');
                //icon.className = 'fas fa-copy'; // Utilitza l'ícona "copy" de FontAwesome

                // Obté l'ID de l'element actual
                var elementId = element.id;

                // Afegeix un event listener al botó per cridar la funció amb l'ID
                button.addEventListener('click', function() {
                    copyContent(elementId);
                });

                // Afegeix l'icona al botó i el botó just dins de l'element "sourceCode"
                //button.appendChild(icon);
                element.appendChild(button);
            });



            // Funció per copiar el contingut d'un element amb l'ID donat
            function copyContent(elementId) {
                var element = document.getElementById(elementId);
                var textToCopy = element.innerText;

                // Crea un element de text i copia el contingut
                var textArea = document.createElement('textarea');
                textArea.value = textToCopy;
                document.body.appendChild(textArea);

                // Selecciona i copia el text
                textArea.select();
                document.execCommand('copy');

                // Elimina l'element de text afegit temporalment
                document.body.removeChild(textArea);

                // Notifica a l'usuari que el codi s'ha copiat
                mostraSnackbar();
            }

            /* SNACKBAR EN COPIAR CODI */

            function mostraSnackbar() {
            // Busquem l'snackbar
            var x = document.getElementById("snackbar");

            // Li afegim la classe show
            x.className = "show";

            // I als tres segons la llevem
            setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
            } 




        </script>
    </div>
</body>

</html>